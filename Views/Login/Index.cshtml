@{
    ViewData["Title"] = "صفحه ورود";
    Layout = "_LayoutLogin";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<link rel="stylesheet" href="~/css/login.css" />

<div class="login-container">
    <h2>صفحه ورود</h2>
    <form method="post" asp-controller="Login" asp-action="Index">
        <label for="userId">نام کاربری</label>
        <input type="number" id="userId" name="userId" required />

        <label for="password">رمز عبور</label>
        <div class="password-wrapper">
            <input type="password" id="password" name="password" required />
            <input type="text" id="passwordText" required />
            <button type="button" id="togglePassword" class="toggle-password" aria-label="نمایش/پنهان رمز">
                <i class="fa fa-eye"></i>
            </button>
        </div>
        <button type="submit" title="برای ورود، نام کاربری و رمز عبور خود را وارد کرده و کلیک کنید.">
            ورود
        </button>
    </form>

    @if (!ViewData.ModelState.IsValid)
    {
        foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
        {
            <p class="error-message">@error.ErrorMessage</p>
        }
    }

    <footer>
        <p>پروژه AP | کوشا مجلسی | امیر محمد داودی</p>
        <p><a href="https://github.com/duvoodi/AP_Project/" target="_blank">لینک ریپازیتوری گیت هاب پروژه</a></p>
    </footer>
</div>

@section Scripts {
    <script>
        const password = document.getElementById("password");
        const passwordText = document.getElementById("passwordText");
        const togglePassword = document.getElementById("togglePassword");

        togglePassword.addEventListener("click", function () {
            const isHidden = password.style.opacity !== "0";
            if (isHidden) {
                password.style.opacity = "0";
                passwordText.style.opacity = "1";
                passwordText.value = password.value;
                passwordText.focus();
                this.querySelector("i").classList.replace("fa-eye", "fa-eye-slash");
            } else {
                password.style.opacity = "1";
                passwordText.style.opacity = "0";
                password.value = passwordText.value;
                password.focus();
                this.querySelector("i").classList.replace("fa-eye-slash", "fa-eye");
            }
        });

        // Sync value on input
        password.addEventListener("input", () => passwordText.value = password.value);
        passwordText.addEventListener("input", () => password.value = passwordText.value);
    </script>
}
